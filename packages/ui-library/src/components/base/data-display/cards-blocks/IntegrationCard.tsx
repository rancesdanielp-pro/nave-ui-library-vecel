'use client';

import * as React from 'react';
import { Slot } from '@radix-ui/react-slot';
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '../../../../utils/cn';
import {
  resolveNativeStyles,
  resolveTokens,
  resolveWebStyles,
  useTheme,
} from '../../../../theme';
import { Badge } from '../system-feedback/Badge';

const baseCard =
  // ✅ background fijo
  'bg-[#F9F9FA] ' +
  'flex flex-col overflow-hidden';

const integrationCardVariants = cva(baseCard, {
  variants: {
    variant: {
      default: 'border border-[#E5E7EB]',
      subtle: 'border border-[#EEF2F7]',
      none: 'border-0',
    },
    logoSize: {
      // Small (el que ya tenías)
      small:
        'w-full max-w-[380px] min-h-[210px] rounded-[16px] px-5 pt-5 pb-4 justify-between',
      // Large (nuevo) — contenedor del card + padding abajo del banner
      large:
        'w-full max-w-[380px] rounded-[16px] px-5 pt-4 pb-4 gap-3',
    },
  },
  defaultVariants: {
    variant: 'default',
    logoSize: 'small',
  },
});

const logoBoxBase =
  'w-10 h-10 rounded-[8px] border flex items-center justify-center overflow-hidden shrink-0';

export type IntegrationCardProps = React.ComponentProps<'div'> &
  VariantProps<typeof integrationCardVariants> & {
    asChild?: boolean;
    tokens?: any;
    platform?: 'web' | 'native';

    logoSize?: 'small' | 'large';

    badgeText?: React.ReactNode;

    logoSlot?: React.ReactNode;
    logoSrc?: string;
    logoAlt?: string;
    initials?: React.ReactNode;

    bannerClassName?: string;

    title: React.ReactNode;
    description?: React.ReactNode;

    linkLabel?: React.ReactNode; // default: "Link"
    linkHref?: string;
    onLinkClick?: () => void;

    logoClassName?: string;
    badgeClassName?: string;
    contentClassName?: string;
    linkClassName?: string;
  };

export function IntegrationCard({
  className,
  variant,
  logoSize = 'small',
  asChild = false,
  tokens,
  platform = 'web',

  badgeText,

  logoSlot,
  logoSrc,
  logoAlt = '',
  initials = ' ',

  bannerClassName,

  title,
  description,

  linkLabel = 'Link',
  linkHref,
  onLinkClick,

  logoClassName,
  badgeClassName,
  contentClassName,
  linkClassName,

  style,
  ...props
}: IntegrationCardProps) {
  const Comp: any = asChild ? Slot : 'div';
  const theme = useTheme();

  const mergedTokens = resolveTokens(
    { componentName: 'integrationCard', variant, tokens },
    theme
  );

  const resolved =
    platform === 'web'
      ? { ...resolveWebStyles(mergedTokens) }
      : resolveNativeStyles(mergedTokens);

  const { backgroundColor: _ignoredBg, ...restResolved } = (resolved ?? {}) as any;

  const rootStyle: React.CSSProperties = {
    ...(restResolved as React.CSSProperties),
    ...(style as React.CSSProperties),
  };

  const hasLink = Boolean(linkHref || onLinkClick);

  const LogoNode = logoSlot ? (
    logoSlot
  ) : logoSrc ? (
   <svg width="42" height="42" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clipPath="url(#clip0_1394_16539)">
        <rect x="1" y="1" width="40" height="40" rx="5.33333" fill="#00BCFF"/>
        <path d="M21.0021 14.0945C14.9533 14.0945 10.0503 17.0079 10.0503 20.6022C10.0503 24.1966 14.9533 27.3921 21.0021 27.3921C27.0508 27.3921 31.9537 24.1962 31.9537 20.6022C31.9537 17.0082 27.0506 14.0945 21.0021 14.0945Z" fill="#00BCFF"/>
        <path d="M17.439 18.5906C17.4335 18.6005 17.3265 18.7033 17.3959 18.7859C17.5651 18.9869 18.0883 19.1022 18.6173 18.9919C18.9323 18.9263 19.3359 18.6279 19.7271 18.3397C20.1004 18.0247 20.5287 17.771 20.9937 17.5895C21.2907 17.4885 21.6152 17.4806 21.9175 17.5671C22.2245 17.673 22.5094 17.8274 22.7597 18.0235C23.4938 18.5363 26.4463 20.9301 26.9565 21.3437C28.5241 20.7382 30.1471 20.2646 31.8058 19.9287C31.5901 18.7001 30.7945 17.5288 29.5738 16.6083C27.8725 17.2721 25.6548 17.6695 23.6219 16.7474C22.9313 16.457 22.1844 16.2993 21.4264 16.2837C19.8135 16.3185 19.1148 16.9668 18.3755 17.6531L17.439 18.5906Z" fill="white"/>
        <path d="M26.8365 21.6042C26.8017 21.5753 23.3651 18.7821 22.5863 18.2385C22.3151 18.0143 21.9806 17.8668 21.622 17.8132C21.4677 17.8018 21.3125 17.8157 21.1632 17.8542C20.7035 18.015 20.2781 18.2505 19.9069 18.5495C19.4718 18.8717 19.0613 19.1749 18.6801 19.2542C18.2196 19.3421 17.7404 19.2752 17.328 19.0656C17.2314 19.0107 17.1536 18.9314 17.1035 18.8371C17.076 18.7649 17.0722 18.6866 17.0927 18.6123C17.1131 18.5381 17.1569 18.4711 17.2185 18.42L18.167 17.4671C18.2774 17.365 18.3882 17.2626 18.5022 17.1621C18.2097 17.2029 17.9207 17.2634 17.6376 17.3429C17.3115 17.4435 16.9722 17.5023 16.629 17.5176C16.2832 17.4851 15.9395 17.4352 15.5995 17.3682C14.5857 17.1472 13.596 16.8396 12.6432 16.4492C11.2949 17.3816 10.4168 18.5263 10.1562 19.8103C10.35 19.8579 10.8577 19.9653 10.9889 19.9924C14.0403 20.6226 14.9906 21.2717 15.163 21.4073C15.2644 21.3013 15.3903 21.218 15.5314 21.1638C15.6724 21.1094 15.8249 21.0857 15.9773 21.094C16.1297 21.1023 16.2781 21.1427 16.4113 21.2119C16.5445 21.2812 16.6591 21.3777 16.7464 21.494C16.9522 21.3394 17.209 21.2554 17.4736 21.2562C17.6223 21.2576 17.7697 21.2816 17.91 21.3273C18.046 21.3677 18.1711 21.4346 18.2771 21.5234C18.383 21.6123 18.4672 21.7212 18.5242 21.8428C18.6576 21.7867 18.8025 21.7581 18.9488 21.7589C19.1239 21.761 19.2967 21.7963 19.4563 21.8629C19.6786 21.9597 19.8588 22.1236 19.9676 22.3278C20.0765 22.5321 20.1073 22.7647 20.0553 22.9873C20.0957 22.9833 20.1363 22.9813 20.1769 22.9813C20.4976 22.9819 20.805 23.1004 21.0318 23.3111C21.2585 23.5218 21.386 23.8074 21.3865 24.1053C21.3865 24.2907 21.3367 24.473 21.2417 24.6359C21.5575 24.8152 21.9223 24.906 22.2923 24.8972C22.3846 24.8973 22.4759 24.8797 22.5605 24.8453C22.645 24.8111 22.721 24.761 22.7838 24.6982C22.8142 24.6583 22.8459 24.6118 22.8165 24.5781L21.9553 23.69C21.9553 23.69 21.8138 23.5654 21.8606 23.5174C21.9089 23.468 21.9966 23.5389 22.0587 23.587C22.4968 23.9269 23.0316 24.4399 23.0316 24.4399C23.0409 24.4454 23.0761 24.5104 23.2739 24.5434C23.3922 24.5626 23.5133 24.5593 23.6303 24.534C23.7472 24.5087 23.8575 24.4618 23.9543 24.396C24.0093 24.3533 24.0595 24.3057 24.1042 24.2537C24.1011 24.2564 24.0978 24.2589 24.0941 24.2609C24.1545 24.1834 24.1849 24.0892 24.1805 23.9937C24.1759 23.8981 24.1369 23.8068 24.0696 23.7344L23.0643 22.686C23.0643 22.686 22.9206 22.5623 22.9699 22.5131C23.0135 22.4699 23.1058 22.535 23.1689 22.5836C23.487 22.8308 23.9367 23.2496 24.3677 23.6421C24.5113 23.7323 24.6821 23.778 24.8555 23.7724C25.0287 23.7668 25.1957 23.7103 25.3322 23.611C25.4441 23.5537 25.5367 23.4687 25.5997 23.3653C25.6627 23.262 25.6936 23.1446 25.689 23.0259C25.6673 22.8776 25.5926 22.7403 25.4768 22.6362L24.1042 21.3539C24.1042 21.3539 23.9588 21.2388 24.0103 21.1808C24.0523 21.1318 24.146 21.2022 24.2081 21.2502C24.6452 21.5901 25.8291 22.5986 25.8291 22.5986C25.9686 22.6822 26.1318 22.7252 26.2978 22.7222C26.4637 22.7191 26.6249 22.6701 26.7608 22.5814C26.848 22.534 26.9215 22.4676 26.9747 22.3878C27.028 22.3081 27.0596 22.2174 27.0666 22.1238C27.0707 22.0269 27.0522 21.9304 27.0125 21.8408C26.9728 21.7511 26.9128 21.6704 26.8365 21.6042Z" fill="white"/>
        <path d="M20.1766 23.2294C20.0154 23.2504 19.8562 23.2832 19.7005 23.3274C19.6835 23.3172 19.7135 23.2377 19.7333 23.1918C19.7541 23.1465 20.0344 22.3628 19.3508 22.0908C19.1978 22.0146 19.0225 21.9863 18.8508 22.01C18.6792 22.0338 18.5203 22.1084 18.398 22.2227C18.3694 22.2505 18.3564 22.2482 18.3532 22.2132C18.3491 22.0668 18.2958 21.9254 18.2008 21.8086C18.1058 21.6918 17.9738 21.6056 17.8233 21.5622C17.6102 21.5012 17.3817 21.5058 17.1717 21.5754C16.9617 21.6449 16.7815 21.7756 16.6579 21.948C16.6359 21.7935 16.5585 21.6504 16.4381 21.5418C16.3177 21.4332 16.1614 21.3655 15.9945 21.3496C15.8276 21.3336 15.6597 21.3705 15.5181 21.4542C15.3765 21.5377 15.2694 21.6633 15.2141 21.8104C15.1588 21.9576 15.1585 22.1178 15.2132 22.265C15.268 22.4124 15.3747 22.5383 15.516 22.6224C15.6573 22.7065 15.825 22.7438 15.992 22.7285C16.159 22.713 16.3155 22.6458 16.4363 22.5376C16.4406 22.5413 16.4422 22.5478 16.4401 22.5609C16.3895 22.7757 16.4239 23.0002 16.5369 23.1933C16.6498 23.3864 16.8339 23.5353 17.0553 23.6126C17.175 23.6555 17.3046 23.6685 17.4313 23.6503C17.558 23.6322 17.6774 23.5835 17.7776 23.509C17.8369 23.4703 17.8465 23.4866 17.8382 23.5385C17.8127 23.6993 17.8451 24.0435 18.3646 24.2388C18.4933 24.2975 18.6389 24.3159 18.7798 24.2916C18.9207 24.2673 19.0495 24.2014 19.147 24.1038C19.2138 24.0475 19.2321 24.0567 19.2355 24.144C19.2438 24.3153 19.3062 24.4804 19.4147 24.6189C19.5232 24.7576 19.6731 24.8635 19.8458 24.9237C20.0186 24.9838 20.2065 24.9956 20.3864 24.9574C20.5663 24.9193 20.7301 24.8328 20.8575 24.7089C20.9851 24.5852 21.0705 24.4292 21.1035 24.2606C21.1364 24.0919 21.1153 23.918 21.0428 23.7605C20.9703 23.6029 20.8496 23.4686 20.6956 23.3742C20.5416 23.2797 20.3612 23.2294 20.1766 23.2294Z" fill="white"/>
        <path d="M21.0007 13.825C14.8367 13.825 9.84012 16.8702 9.84012 20.6055C9.84012 20.7021 9.83887 20.9686 9.83887 21.0024C9.83887 24.9655 14.2061 28.1749 20.9992 28.1749C27.8334 28.1749 32.1609 24.9663 32.1609 21.0032V20.6055C32.1608 16.8702 27.1641 13.825 21.0007 13.825ZM31.6577 19.8541C30.0496 20.1845 28.4796 20.6586 26.9696 21.2696C25.9107 20.4115 23.4641 18.4354 22.8016 17.9736C22.5448 17.7729 22.2524 17.615 21.9377 17.5067C21.8006 17.4665 21.6577 17.4458 21.5138 17.4451C21.3307 17.4474 21.149 17.4758 20.9752 17.5294C20.5099 17.7089 20.0811 17.961 19.7076 18.275L19.6862 18.2906C19.3018 18.5745 18.9044 18.8682 18.6038 18.9304C18.4722 18.958 18.3378 18.972 18.2029 18.9721C18.0676 18.9825 17.9315 18.9681 17.8022 18.9294C17.673 18.8909 17.5533 18.8289 17.4499 18.747C17.4312 18.7248 17.4436 18.6889 17.4871 18.6373L17.4927 18.6302L18.4244 17.698C19.1539 17.0204 19.8431 16.3805 21.4289 16.3467C21.4553 16.346 21.482 16.3455 21.5081 16.3455C22.2283 16.3728 22.9363 16.5286 23.5932 16.8043C24.4759 17.2141 25.448 17.4307 26.4348 17.4373C27.5142 17.42 28.5766 17.184 29.5477 16.7458C30.6791 17.6297 31.4296 18.6942 31.6577 19.8541ZM21.0027 14.2254C24.2742 14.2254 27.2019 15.0964 29.1701 16.4683C28.3113 16.8327 27.3809 17.0286 26.437 17.0438C25.5134 17.0368 24.604 16.8335 23.7782 16.4494C23.0642 16.1467 22.2931 15.9774 21.5088 15.9513C21.4789 15.9513 21.4488 15.9517 21.4193 15.9524C20.4746 15.9395 19.5563 16.2423 18.8318 16.8056C18.3931 16.827 17.9592 16.9006 17.5407 17.0246C17.2465 17.1157 16.9406 17.1701 16.631 17.1864C16.5144 17.1864 16.3045 17.1765 16.2857 17.1758C15.1726 16.9938 14.0808 16.7131 13.0253 16.3377C14.9896 15.0411 17.8354 14.2254 21.0027 14.2254ZM12.6391 16.6083C14.0004 17.1255 15.6518 17.5249 16.1741 17.5563C16.3197 17.5652 16.4749 17.5805 16.6302 17.5808C16.9795 17.565 17.3249 17.5054 17.657 17.4036C17.8547 17.3521 18.0727 17.2959 18.3021 17.2553C18.2407 17.311 18.1796 17.3676 18.1182 17.4247L17.1721 18.3755C17.1001 18.4347 17.0492 18.5128 17.0261 18.5995C17.003 18.6862 17.0087 18.7774 17.0425 18.861C17.0974 18.9668 17.1837 19.0558 17.2913 19.1174C17.5973 19.2781 17.9441 19.3599 18.2957 19.3541C18.4303 19.355 18.5647 19.3419 18.6963 19.3152C19.0931 19.2326 19.5092 18.9246 19.9499 18.5991C20.3149 18.3063 20.7318 18.0746 21.1821 17.9142C21.2942 17.8866 21.4096 17.8719 21.5256 17.8705C21.5553 17.8703 21.585 17.8719 21.6144 17.8754C21.961 17.9283 22.2842 18.0715 22.5464 18.2885C23.3233 18.8308 26.7603 21.6236 26.7941 21.6512C26.8624 21.7113 26.9161 21.7843 26.9517 21.8652C26.9872 21.9461 27.0039 22.0331 27.0004 22.1204C26.9942 22.2041 26.9659 22.2851 26.918 22.3563C26.87 22.4274 26.804 22.4865 26.7257 22.5283C26.5921 22.6113 26.4354 22.6565 26.2748 22.6589C26.1337 22.659 25.9956 22.6217 25.8763 22.5516C25.8638 22.542 24.6862 21.5389 24.2526 21.2019C24.1983 21.1485 24.1269 21.1131 24.0491 21.1009C24.0318 21.1005 24.0147 21.104 23.999 21.1109C23.9834 21.1176 23.9697 21.1278 23.9589 21.1403C23.8908 21.2183 23.9671 21.3265 24.0572 21.3974L25.4328 22.6824C25.5353 22.7752 25.6022 22.8969 25.6231 23.0285C25.6267 23.1362 25.598 23.2426 25.5403 23.3362C25.4827 23.4296 25.3983 23.5065 25.2964 23.5582C25.1534 23.6518 24.9838 23.7039 24.8088 23.708C24.6691 23.708 24.5324 23.6694 24.4163 23.5972L24.2191 23.4168C23.8583 23.0872 23.4859 22.7462 23.2133 22.535C23.1583 22.4823 23.0863 22.4476 23.0083 22.4361C22.992 22.4359 22.9759 22.4388 22.961 22.4447C22.9461 22.4506 22.9327 22.4594 22.9217 22.4705C22.8906 22.5026 22.8689 22.5602 22.9468 22.6559C22.9677 22.6816 22.9909 22.7056 23.0161 22.7278L24.0198 23.7751C24.0777 23.8361 24.1116 23.9136 24.1157 23.9949C24.1198 24.0762 24.094 24.1563 24.0426 24.2221L24.007 24.2638C23.9776 24.2933 23.9463 24.3213 23.9134 24.3475C23.7713 24.4443 23.599 24.4951 23.4229 24.4919C23.3773 24.4921 23.332 24.4885 23.2872 24.4812C23.214 24.4759 23.1447 24.4488 23.0893 24.4038L23.0768 24.392C23.0222 24.3393 22.5163 23.8595 22.0978 23.5349C22.0458 23.4836 21.9772 23.4495 21.9024 23.4379C21.8853 23.4378 21.8683 23.4411 21.8527 23.4475C21.837 23.454 21.823 23.4635 21.8117 23.4754C21.7291 23.5596 21.8534 23.6855 21.9061 23.7318L22.7619 24.609C22.7546 24.6284 22.7438 24.6465 22.7299 24.6625C22.6991 24.7019 22.5954 24.7984 22.2849 24.8346C22.2471 24.8391 22.2092 24.8412 22.1712 24.841C21.8767 24.8234 21.5901 24.7445 21.3328 24.61C21.4246 24.4293 21.4656 24.23 21.4521 24.0305C21.4388 23.8311 21.3713 23.6381 21.2562 23.4693C21.141 23.3005 20.9818 23.1615 20.7933 23.0652C20.6049 22.9689 20.3933 22.9183 20.1782 22.9182C20.1632 22.9182 20.1472 22.9186 20.1321 22.9191C20.1688 22.6933 20.1254 22.4625 20.0086 22.2616C19.8917 22.0606 19.7077 21.9005 19.4843 21.8052C19.3162 21.7352 19.1346 21.698 18.9503 21.6959C18.8166 21.6953 18.6838 21.7176 18.5588 21.7618C18.4287 21.5271 18.2039 21.3499 17.9335 21.2686C17.7863 21.2201 17.6313 21.1948 17.4751 21.1936C17.2189 21.1923 16.9689 21.2668 16.7612 21.4062C16.6668 21.296 16.5484 21.2055 16.4138 21.1409C16.2791 21.0762 16.1313 21.0386 15.98 21.0308C15.8286 21.0229 15.6772 21.0446 15.5356 21.095C15.394 21.1452 15.2654 21.2226 15.1583 21.3223C14.8917 21.133 13.8345 20.5092 11.0047 19.9124C10.8695 19.884 10.5627 19.8024 10.3695 19.7498C10.635 18.5699 11.442 17.4924 12.6391 16.6083ZM17.8881 23.4505L17.8575 23.4251H17.8266C17.7948 23.4273 17.7645 23.4386 17.74 23.4576C17.6185 23.5445 17.4704 23.5935 17.3171 23.5974C17.2362 23.5969 17.1562 23.5824 17.0811 23.5549C16.8734 23.4829 16.7009 23.3433 16.5957 23.1621C16.4904 22.9809 16.4596 22.7703 16.5089 22.5695C16.5122 22.555 16.5114 22.5399 16.5063 22.5256C16.5013 22.5114 16.4923 22.4988 16.4802 22.489L16.4339 22.4538L16.3906 22.4921C16.2645 22.6059 16.0956 22.6694 15.9199 22.6693C15.7888 22.6699 15.6603 22.6352 15.5499 22.5695C15.4395 22.5039 15.3518 22.41 15.2974 22.2991C15.2431 22.1883 15.2243 22.0653 15.2434 21.9448C15.2624 21.8243 15.3185 21.7115 15.405 21.6199C15.4914 21.5283 15.6044 21.4619 15.7305 21.4285C15.8566 21.3951 15.9904 21.3963 16.1158 21.4319C16.2412 21.4674 16.3529 21.5358 16.4374 21.6289C16.522 21.7219 16.5758 21.8356 16.5925 21.9565L16.616 22.1264L16.7164 21.9825C16.8297 21.8194 16.9978 21.6955 17.1948 21.6305C17.3917 21.5654 17.6062 21.5626 17.805 21.6228C17.9423 21.6629 18.0626 21.7418 18.149 21.8486C18.2355 21.9554 18.2837 22.0848 18.287 22.2184C18.2943 22.3007 18.3575 22.3049 18.3697 22.3049C18.385 22.3039 18.3999 22.2999 18.4134 22.2933C18.427 22.2867 18.439 22.2775 18.4486 22.2665C18.5133 22.2038 18.5912 22.1539 18.6774 22.1201C18.7636 22.0863 18.8563 22.0692 18.9499 22.0699C19.0796 22.0725 19.2072 22.0993 19.3256 22.1486C19.9668 22.4042 19.676 23.1611 19.6726 23.1689C19.6172 23.2942 19.6151 23.3496 19.6669 23.3816L19.6922 23.3926H19.711C19.7538 23.3882 19.7956 23.3781 19.8352 23.3625C19.9444 23.3224 20.0599 23.2988 20.1772 23.2923C20.292 23.2924 20.4061 23.3134 20.5122 23.3543C20.6183 23.3951 20.7148 23.455 20.796 23.5304C20.8771 23.606 20.9416 23.6955 20.9854 23.7941C21.0294 23.8926 21.052 23.9983 21.052 24.1051C21.0519 24.2117 21.0293 24.3174 20.9853 24.416C20.9413 24.5145 20.8769 24.6041 20.7957 24.6795C20.7143 24.7549 20.6179 24.8148 20.5118 24.8555C20.4057 24.8963 20.2919 24.9173 20.177 24.9173C19.9518 24.9185 19.7347 24.8384 19.5719 24.6938C19.409 24.5491 19.3131 24.3513 19.3043 24.1422C19.3031 24.105 19.2989 24.0061 19.2086 24.0061C19.1676 24.0105 19.1298 24.0291 19.1027 24.058C18.991 24.1684 18.8368 24.2331 18.6738 24.2379C18.5765 24.236 18.4805 24.2166 18.3912 24.1809C17.8931 23.9931 17.8862 23.6754 17.9064 23.5476C17.9113 23.5312 17.9122 23.514 17.909 23.4972C17.9059 23.4804 17.8987 23.4644 17.8881 23.4505ZM21.0026 26.979C15.0757 26.979 10.2713 24.1239 10.2713 20.6022C10.2722 20.4614 10.2808 20.3208 10.2971 20.1808C10.3444 20.1913 10.8151 20.2959 10.9126 20.3162C13.8033 20.9126 14.7585 21.5328 14.9199 21.6501C14.8513 21.8029 14.8243 21.9692 14.8415 22.1341C14.8587 22.2989 14.9194 22.4573 15.0183 22.5951C15.1172 22.733 15.2512 22.846 15.4084 22.9242C15.5656 23.0023 15.7412 23.0432 15.9195 23.0432C15.9861 23.0433 16.0526 23.0376 16.1181 23.0262C16.1608 23.2255 16.2586 23.4112 16.4018 23.565C16.5451 23.7186 16.7289 23.8351 16.9352 23.903C17.0582 23.9478 17.189 23.9712 17.3211 23.9721C17.4043 23.9725 17.4871 23.963 17.5677 23.9438C17.6669 24.1379 17.8219 24.3028 18.0156 24.4202C18.2093 24.5376 18.4342 24.6031 18.6654 24.6094C18.7782 24.6094 18.8901 24.5909 18.996 24.5545C19.0762 24.7368 19.204 24.8975 19.3679 25.0223C19.5317 25.1471 19.7264 25.232 19.9346 25.2693C20.1426 25.3065 20.3574 25.2951 20.5594 25.2359C20.7616 25.1767 20.9446 25.0716 21.092 24.9302C21.4217 25.1086 21.7924 25.2115 22.1734 25.2302C22.2282 25.2301 22.2828 25.2269 22.3371 25.2206C22.4778 25.2166 22.6159 25.1849 22.7423 25.1274C22.8688 25.0699 22.9806 24.9881 23.0702 24.8873C23.0872 24.8658 23.1023 24.8429 23.1156 24.8191C23.2279 24.8509 23.3444 24.8679 23.4619 24.8694C23.7158 24.8646 23.961 24.7832 24.1606 24.6374C24.3712 24.5089 24.5192 24.3089 24.5729 24.0801C24.5733 24.0776 24.5737 24.0751 24.5738 24.0725C24.6508 24.0871 24.7291 24.0944 24.8077 24.0944C25.0642 24.0914 25.3141 24.0179 25.5256 23.883C25.6864 23.7963 25.8191 23.671 25.9098 23.5202C26.0004 23.3693 26.0457 23.1986 26.0406 23.026C26.1186 23.0411 26.198 23.0487 26.2777 23.0489C26.517 23.0464 26.7506 22.9796 26.9499 22.8566C27.0824 22.7814 27.1939 22.6782 27.2752 22.5553C27.3566 22.4324 27.4054 22.2935 27.4179 22.1497C27.4338 21.9496 27.3819 21.75 27.2693 21.5788C28.7112 21.0321 30.2001 20.599 31.7201 20.2841C31.7289 20.3895 31.7337 20.4956 31.7337 20.6023C31.7337 24.1239 26.9292 26.979 21.0026 26.979Z" fill="#0A0080"/>
        </g>
        <rect x="0.5" y="0.5" width="41" height="41" rx="8.5" stroke="#E2E5E9"/>
        <defs>
        <clipPath id="clip0_1394_16539">
        <rect x="1" y="1" width="40" height="40" rx="8" fill="white"/>
        </clipPath>
        </defs>
   </svg>

  ) : (
    <span className="text-xs font-semibold text-[#111827]">{initials}</span>
  );

  return (
    <Comp
      data-slot="integration-card"
      className={cn(
        integrationCardVariants({ variant, logoSize }),
        logoSize === 'small' ? 'justify-between' : '',
        className
      )}
      style={rootStyle}
      {...props}
    >
      {/* =========================
          SMALL (logo cuadrado 40x40)
         ========================= */}
      {logoSize === 'small' ? (
        <>
          {/* TOP ROW */}
          <div className="flex items-start justify-between gap-3">
            <div
              className={cn(
                logoBoxBase,
                'border-[#E5E7EB] bg-white',
                logoClassName
              )}
            >
              {LogoNode}
            </div>

              {badgeText ? (
              <Badge
                tone="success"
                size="small"
                className={badgeClassName}
              >
                {badgeText}
              </Badge>
            ) : null}


          </div>

          {/* MIDDLE CONTENT */}
          <div className={cn('mt-2 flex flex-col gap-2 text-left', contentClassName)}>
            <div className="text-[16px] font-[550] leading-[1.3] tracking-[-0.04em] text-[#111827]">
              {title}
            </div>

            {description ? (
              <div className="text-[14px] font-normal leading-[1.3] tracking-[-0.04em] text-[#6B7280]">
                {description}
              </div>
            ) : null}
          </div>

          {/* BOTTOM LINK */}
          {hasLink ? (
            linkHref ? (
              <a
                href={linkHref}
                onClick={() => onLinkClick?.()}
                className={cn(
                  'mt-3 w-fit text-[14px] font-[550] leading-[1.3] tracking-[-0.04em] underline underline-offset-4',
                  'text-[#652BDF]',
                  linkClassName
                )}
              >
                {linkLabel}
              </a>
            ) : (
              <button
                type="button"
                onClick={onLinkClick}
                className={cn(
                  'mt-3 w-fit text-left text-[14px] font-[550] leading-[1.3] tracking-[-0.04em] underline underline-offset-4 bg-transparent p-0',
                  'text-[#652BDF]',
                  linkClassName
                )}
              >
                {linkLabel}
              </button>
            )
          ) : (
            <div />
          )}
        </>
      ) : (
        /* =========================
            LARGE (banner 364x140)
           ========================= */
        <>
          <div
            className={cn(
              'relative w-full max-w-[364px] h-[140px] rounded-[5.33px] overflow-hidden',
              'bg-[#08B7F6]',
              bannerClassName
            )}
          >
          {badgeText ? (
            <div
              className={cn(
                'absolute top-3 right-3',
                badgeClassName
              )}
            >
              <span className="px-3 py-1 rounded-full text-xs font-semibold bg-white/90 text-[#0F766E]">
                {badgeText}
              </span>
            </div>
          ) : null}


            {/* Logo centrado */}
            <div className="absolute inset-0 flex items-center justify-center">
              <div
                className={cn(
                  'w-[88px] h-[88px] flex items-center justify-center',
                  logoClassName
                )}
              >
                {LogoNode}
              </div>
            </div>
          </div>

          {/* Content */}
          <div className={cn('flex flex-col gap-2 text-left', contentClassName)}>
            <div className="text-[16px] font-[550] leading-[1.3] tracking-[-0.04em] text-[#111827]">
              {title}
            </div>

            {description ? (
              <div className="text-[14px] font-normal leading-[1.3] tracking-[-0.04em] text-[#6B7280]">
                {description}
              </div>
            ) : null}

            {hasLink ? (
              linkHref ? (
                <a
                  href={linkHref}
                  onClick={() => onLinkClick?.()}
                  className={cn(
                    'w-fit text-[14px] font-[550] leading-[1.3] tracking-[-0.04em] underline underline-offset-4',
                    'text-[#652BDF]',
                    linkClassName
                  )}
                >
                  {linkLabel}
                </a>
              ) : (
                <button
                  type="button"
                  onClick={onLinkClick}
                  className={cn(
                    'w-fit text-left text-[14px] font-[550] leading-[1.3] tracking-[-0.04em] underline underline-offset-4 bg-transparent p-0',
                    'text-[#652BDF]',
                    linkClassName
                  )}
                >
                  {linkLabel}
                </button>
              )
            ) : null}
          </div>
        </>
      )}
    </Comp>
  );
}
